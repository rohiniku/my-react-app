**概要**
- **機能**: 5枚の縦スクロールパネル（A,B,C,D,E）を持ち、各パネルに表（0）と裏（1）がある。ユーザーの縦スクロール操作（マウス/タッチ/キーボード）により、表→裏のフリップとパネル間の縦スライド遷移を行う。フリップは中央を基準に横方向に縮小・拡大して切り替わる。

**ファイル構成（`myPage` フォルダ）**
- `index.html`: パネル構造と画像参照（`img_A0.png` / `img_A1.png` など）
- `styles.css`: ビューのレイアウト、フリップ（scaleX）とスライド（translateY）のスタイル
- `script.js`: 入力ハンドリング（`wheel`, `touch`）, flip/slide ロジック
- 画像ファイル: `img_A0.png`, `img_A1.png`, `img_B0.png` ... など（500×500を想定）

**主な動作（ユーザー目線）**
- 初期表示はパネル `A` の表（`A0`）
- 下方向スクロール:
  - 表表示中に画面高さの20%分スクロール → 表→裏のフリップ（約200ms×2の順で縮小→拡大）
  - 裏表示中に画面高さの80%分追加スクロール → 次パネルへ縦スライド（約500ms）
- 上方向スクロール（戻る動作）:
  - 裏表示中に20%で裏→表へフリップ
  - 表表示中に80%で前のパネル（上のパネル）の裏へスライド（このとき到着表示はフリップなしで裏が直接表示される）

**仕組み（実装の要点）**
- 入力と閾値:
  - `wheel` の `deltaY` と `touch` の移動量を累積し、閾値（画面高さの20% / 80%）で動作を発火。
  - 閾値はウィンドウリサイズで再計算される。
- フリップアニメーション:
  - CSS の `transform: translateX(-50%) scaleX(...)` を使い、横方向中央を基点に画像を縮めて（scaleX 1→0）、裏を拡げる（0→1）。これで中央で幅が縮む／広がる視覚になる。
  - JS 側では `front.style.transform` / `back.style.transform` を設定して制御。
- スライドアニメーション:
  - パネル群をラップする要素に `transform: translateY(-N * panelHeight)` を適用してパネルを縦に切り替える（500ms イージング）。
  - スライドで「前パネルの裏へ移る（上方向）」場合、到着表示で裏が瞬時に表示されるように、到着前に裏を即時セットし、トランジションを一時的に無効化してから復帰している（これにより不必要なフリップアニメが入らない）。
  
- 再入制御:
  - アニメーション中は `busy` フラグで多重発火を防止。
  - スライド直後に誤って直ちにフリップしないよう `lockFlip` フラグで短時間ロックする。

**主要な設定箇所（変更するときに見るところ）**
- `script.js`:
  - `FLIP_TIME`（フリップ半分の時間）と `SLIDE_TIME`（スライド時間）
  - `FLIP_THRESHOLD` / `SLIDE_THRESHOLD` はコードで viewport の割合から計算（ウィンドウサイズ依存）。
  - `PANEL_SIZE`: 現状は 500px 固定（画像サイズ）。横幅やレスポンシブ化するならこの値と translateY の計算に注意。
  - `revealedBack` / `lockFlip` の使い方（裏を一度見たときの記録や一時ロック）
- `styles.css`:
  - `--panel-size`: パネルの高さ（現在は 500px）
  - `.face` の `transform-origin` や `transition` を調整すれば、縮みに対する見た目（縦縮みも含める等）を変えられる。

**改造するときのポイント / よくある要望への対応方法**
- 画像サイズやレスポンシブ化:
  - パネルを画面幅に応じて可変にしたい場合、`--panel-size` を `%` や `vw` / `vh` を使うようにして、`PANEL_SIZE`（JS 側）を DOM の実サイズ（例: `viewport.clientHeight` や `getBoundingClientRect().height`）で計算するよう変更する。これにより translateY の計算が正しくなる。
- フリップの見た目調整（縦にも細くしたい等）:
  - `scaleY` を併用（例: `scaleX(0.0) scaleY(0.9)`）して高さにわずかな圧縮を入れると「縦に細くなる」効果が出る。
- 閾値や操作感のチューニング:
  - 現在は距離ベースの閾値だが、速度（スワイプの速さ）や慣性を考慮した判定を入れると UX が向上する（速度ベースの発火を併用する）。
- 多数パネル / 動的生成への対応:
  - パネル要素を静的に列挙するのではなく、`data-*` 属性を用いてメタ情報を持たせ、JS 側で `.panel` を走査して初期化するパターンにすれば、任意数のパネルに対応可能。
- コンポーネント化 / パッケージ化:
  - ロジックをクラス（`PanelScroller` 等）に抽象化して、初期化オプション（閾値、時間、ループの有無、レスポンシブ）を受け取るようにすると再利用しやすい。
  - Web Component（Custom Element）や React/Vue 用のラッパーとして実装すれば既存アプリへ組み込みやすくなる。

**アクセシビリティとフォールバック**
- キーボード操作: 現在は矢印キーで簡易操作可能だが、フォーカス管理や `aria-hidden`/`aria-live` の更新を追加すると支援技術での利用性が向上する。
- フォールバック: 古いブラウザでは `transform` の振る舞いが異なることがある。必要なら `transition`/`transform` のフォールバックやポリフィルを検討。

**パフォーマンス注意点**
- `will-change: transform` を必要箇所に設定しているが、常時複数要素に与えると逆効果。必要最小限で利用する。
- 大きい画像は事前に最適化しておく（WebP 併用など）。

**テスト／ローカルでの確認手順**
- `myPage/index.html` をブラウザで開く（ファイルを直接開いてOK）。
- 画像がない場合はプレースホルダSVGがいくつか用意してあるので即確認できる。

**将来的な拡張案（アイデア）**
- ループスクロール（最後→最初へシームレス移動）
- モジュール化して NPM 配布、設定オブジェクトで閾値やアニメーションを外部から制御
- スワイプ速度に基づくスマートな遷移（瞬発的に移動したら閾値未満でも遷移する）
- サーバーで画像アセットを最適化（レスポンシブ画像 srcset）

---
この README は現状の `myPage` 実装（`index.html`, `styles.css`, `script.js`）を基に作成しました。具体的な改造を一緒に行う場合は、どの方向（レスポンシブ化／ライブラリ化／アニメーション改良など）を優先するか教えてください。必要ならサンプルパッチを作成します。
